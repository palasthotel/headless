(()=>{"use strict";const e=window.wp.plugins,n=window.wp.element,t=window.wp.editPost,o=window.wp.components,s=window.wp.data;(0,e.registerPlugin)("headless-plugin",{icon:()=>null,render:function(){const{state:e,reload:l}=(()=>{const[e,t]=(0,n.useState)("idle"),o=(0,s.useSelect)((e=>e("core/editor").getCurrentPost()));return{state:e,reload:()=>{t("loading"),fetch((e=>window.Headless.ajax+"?action="+window.Headless.actions.reload+"&post="+e)(o.id)).then((e=>e.json())).then((e=>{e.success?t("success"):(console.error(e),t("error"))})).catch((()=>{t("error")})).finally((()=>{setTimeout((()=>{t("idle")}),4e3)}))}}})();return(0,n.createElement)(t.PluginDocumentSettingPanel,{title:"Headless"},(0,n.createElement)(o.Button,{variant:"secondary",disabled:"idle"!=e,onClick:l},"Reload cache"),"idle"==e&&(0,n.createElement)("p",{className:"description"},"Reload contents in headless frontend."),"loading"==e&&(0,n.createElement)("p",null,"Loading..."),"success"==e&&(0,n.createElement)("p",null,"ðŸŽ‰ Success"),"error"==e&&(0,n.createElement)("p",null,"ðŸš¨ Something went wrong"))}})})();