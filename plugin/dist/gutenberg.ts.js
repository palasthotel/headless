!function(){"use strict";var e=window.wp.plugins,t=window.wp.element,n=window.wp.editPost,o=window.wp.components;var l=window.wp.data;(0,e.registerPlugin)("headless-plugin",{icon:()=>null,render:function(){const{state:e,reload:r}=(()=>{const[e,n]=(0,t.useState)("idle"),o=(0,l.useSelect)((e=>e("core/editor").getCurrentPost()));return{state:e,reload:()=>{n("loading"),fetch((e=>window.Headless.ajax+"?action="+window.Headless.actions.reload+"&post="+e)(o.id)).then((e=>e.json())).then((e=>{e.success?n("success"):(console.error(e),n("error"))})).catch((()=>{n("error")})).finally((()=>{setTimeout((()=>{n("idle")}),4e3)}))}}})();return(0,t.createElement)(n.PluginDocumentSettingPanel,{title:"Headless"},(0,t.createElement)(o.Button,{variant:"secondary",disabled:"idle"!=e,onClick:r},"Reload cache"),"idle"==e&&(0,t.createElement)("p",{className:"description"},"Reload contents in headless frontend."),"loading"==e&&(0,t.createElement)("p",null,"Loading..."),"success"==e&&(0,t.createElement)("p",null,"ðŸŽ‰ Success"),"error"==e&&(0,t.createElement)("p",null,"ðŸš¨ Something went wrong"))}});const r=window.Headless.preview_url;null!=r&&document.addEventListener("DOMContentLoaded",(function(){setInterval((function(){const e=document.querySelectorAll("[target^=wp-preview-]");e&&e.length&&e.forEach((e=>{e.setAttribute("href",r)}))}),1e3)}))}();